<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ELDEN RING NIGHTREIGN ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼†ãƒœã‚¹ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
  <meta name="description" content="ELDEN RING NIGHTREIGN ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼†ãƒœã‚¹ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="ELDEN RING NIGHTREIGN,ãƒŠã‚¤ãƒˆãƒ¬ã‚¤ãƒ³,NIGHTREIGN,ãƒ„ãƒ¼ãƒ«,ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ,ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼,ãƒœã‚¹,é¸æŠ,ãƒ©ãƒ³ãƒ€ãƒ ">
  <meta name="robots" content="index, follow">
  <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
  <link rel="shortcut icon" href="favicon/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
  <meta name="apple-mobile-web-app-title" content="ERN ROULETTE" />
  <link rel="manifest" href="favicon/site.webmanifest" />
  <!-- canonical -->
  <link rel="canonical" href="https://17number.github.io/ern-character-boss-roulette/">
  <!-- æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "ERN Character & Boss Roulette",
      "url": "https://17number.github.io/ern-character-boss-roulette/",
      "applicationCategory": "Utility",
      "operatingSystem": "Web",
      "description": "ELDEN RING NIGHTREIGN ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼†ãƒœã‚¹ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ",
      "author": {
        "@type": "Person",
        "name": "17number"
      }
    }
  </script>
  <!-- goat counter -->
  <script data-goatcounter="https://ern-character-boss-roulette.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RHK40Q51V4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-RHK40Q51V4');
  </script>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#9aa4b2;--p:14px}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans JP',sans-serif;background:linear-gradient(180deg,#071224 0%,#07142a 100%);color:#e6eef6}
    .wrap{max-width:1100px;margin:28px auto;padding:18px;background:rgba(255,255,255,0.02);border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 16px;color:var(--muted);font-size:13px}
    .grid{display:grid;grid-template-columns:1fr 380px;gap:18px}
    .card{background:var(--card);padding:14px;border-radius:10px}
    .list{display:flex;flex-wrap:wrap;gap:8px}
    .chip{padding:6px 10px;border-radius:8px;background:rgba(255,255,255,0.03);cursor:pointer;border:1px solid rgba(255,255,255,0.03);user-select:none}
    .chip input{display:none}
    .chip:has(input:checked){background:#1f6feb;border-color:#1f6feb;color:white}
    button{background:#1f6feb;border:none;padding:8px 12px;border-radius:8px;color:white;cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .result{font-size:18px;margin-top:12px}
    .result .row{margin:6px 0}
    .small{font-size:13px}
    .options{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .footer{margin-top:12px;color:var(--muted);font-size:13px}
    .color-dot{display:inline-block;width:12px;height:12px;border-radius:50%;margin-right:6px;vertical-align:-2px}
    .dot-red{background:#f87171}
    .dot-blue{background:#60a5fa}
    .dot-green{background:#86efac}
    .char-red{color:#f87171}
    .char-blue{color:#60a5fa}
    .char-green{color:#86efac}
    input[type="number"]{width:64px;padding:6px;border-radius:6px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    label.small{display:flex;align-items:center;gap:8px}
    .anim-slot{height:54px;display:flex;align-items:center;justify-content:center}
    .spinner{padding:6px 12px;border-radius:8px;background:linear-gradient(90deg,#0b1220,#0f1b2a);border:1px solid rgba(255,255,255,0.04)}
    @media(max-width:1080px){.grid{grid-template-columns:1fr;}.wrap{margin:12px}}
    #chars.list {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }
    #chars.list .chip { width: 100%; box-sizing: border-box; }
    #bosses.list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    #bosses.list .chip { width: 100%; box-sizing: border-box; }
    .toast {
      position: fixed;
      right: 20px;
      bottom: 20px;
      background: rgba(20,25,30,0.95);
      color: #fff;
      padding: 10px 14px;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(2,6,23,0.6);
      opacity: 0;
      transform: translateY(12px);
      transition: opacity .25s ease, transform .25s ease;
      z-index: 9999;
      font-size: 14px;
    }
    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }
    @media(max-width:1080px){
      .grid {
        display: flex;
        flex-direction: column;
      }
      .grid > div:nth-child(2) {
        order: -1;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js" integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
  <div class="wrap">
    <h1>ELDEN RING NIGHTREIGN ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼†ãƒœã‚¹ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
    <div
      style="
        margin-top: 1rem;
        margin-bottom: 1rem;
      "
    >
      <a
        href="https://17number.github.io/ern-tools/"
        target="_blank"
        rel="noopener noreferrer"
        style="
          color: white;
          background: #1f6feb;
          padding: 0.4rem 0.55rem;
          border-radius: 6px;
          text-decoration: none;
          transition: background 0.15s ease;
        "
        onmouseover="this.style.background='#3182f6'"
        onmouseout="this.style.background='#1f6feb'"
      >
        ğŸ§° ãã®ä»–ãƒ„ãƒ¼ãƒ«é›† â†—
      </a>
    </div>
    <div class="grid">
      <div>
        <div class="card">
          <div style="display:flex;justify-content:flex-start;align-items:center">
            <div style="margin-right: 12px">
              <div class="muted">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°</div>
              <div style="margin-top:6px"><input id="players" type="number" min="1" max="3" value="3" /></div>
            </div>
            <div style="margin-right: 12px">
              <div class="muted">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¢«ã‚Š</div>
              <div style="margin-top:10px; margin-bottom:4px;"><label class="small"><input id="allowDup" type="checkbox" checked /> è¨±å¯</label></div>
            </div>
            <div style="margin-right: 12px">
              <div class="muted">DLC</div>
              <div style="margin-top:10px; margin-bottom:4px;"><label class="small"><input id="withDlc" type="checkbox" checked /> ã‚ã‚Š</label></div>
            </div>
            <button id="spin" style="margin-right: 12px">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</button>
            <button id="reset">åˆæœŸåŒ–</button>
          </div>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">

          <div>
            <div class="muted">ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å€™è£œï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ æœ‰åŠ¹/ç„¡åŠ¹ ã®åˆ‡æ›¿ï¼‰</div>
            <div id="chars" class="list" style="margin-top:8px"></div>
          </div>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.03)">

          <div>
            <div class="muted">ãƒœã‚¹å€™è£œï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ æœ‰åŠ¹/ç„¡åŠ¹ ã®åˆ‡æ›¿ï¼‰</div>
            <div id="bosses" class="list" style="margin-top:8px"></div>
          </div>
        </div>
      </div>

      <div>
        <div class="card">
          <div class="result" id="resultBox"></div>
          <button id="copy">çµæœã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>
      </div>
    </div>
  </div>

  <footer style="font-size: 0.9em; margin-top: 2rem; text-align: center;">
    <a href="privacy.html" style="padding: 0; margin: 0;">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
  </footer>

<script>
(() => {
  // ãƒ‡ãƒ¼ã‚¿
  const CHARACTERS = [
    {name:'è¿½è·¡è€…', dlc:false},
    {name:'å®ˆè­·è€…', dlc:false},
    {name:'é‰„ã®ç›®', dlc:false},
    {name:'ãƒ¬ãƒ‡ã‚£', dlc:false},
    {name:'ç„¡é ¼æ¼¢', dlc:false},
    {name:'å¾©è®è€…', dlc:false},
    {name:'éš è€…', dlc:false},
    {name:'åŸ·è¡Œè€…', dlc:false},
    {name:'å­¦è€…(DLC)', dlc:true},
    {name:'è‘¬å„€å±‹(DLC)', dlc:true},
  ];
  const BOSSES = [
    {name:'ä¸‰ã¤é¦–ã®ç£', kana:'ã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹', deep:false, dlc:false},
    {name:'é£Ÿã‚‰ã„ã¤ãé¡', kana:'ã‚¨ãƒ‡ãƒ¬', deep:false, dlc:false},
    {name:'çŸ¥æ€§ã®èŸ²', kana:'ã‚°ãƒã‚¹ã‚¿ãƒ¼', deep:false, dlc:false},
    {name:'å…†ã—', kana:'ãƒãƒªã‚¹', deep:false, dlc:false},
    {name:'èª¿å¾‹ã®é­”ç‰©', kana:'ãƒªãƒ–ãƒ©', deep:false, dlc:false},
    {name:'é—‡é§†ã‘ã‚‹ç‹©äºº', kana:'ãƒ•ãƒ«ã‚´ãƒ¼ãƒ«', deep:false, dlc:false},
    {name:'éœ§ã®è£‚ã‘ç›®', kana:'ã‚«ãƒªã‚´', deep:false, dlc:false},
    {name:'å®‰å¯§è€…ãŸã¡(DLC)', kana:'ãƒãƒ«ãƒ¢ãƒ‹ã‚¢', deep:false, dlc:true},
    {name:'ç“¦ç¤«ã®ç‹(DLC)', kana:'ã‚¹ãƒˆãƒ©ã‚²ã‚¹', deep:false, dlc:true},
    {name:'å¤œã‚’è±¡ã‚‹è€…', kana:'ãƒŠãƒ¡ãƒ¬ã‚¹', deep:false, dlc:false},
    // å¸¸å¤œ
    {name:'[å¸¸å¤œ] ä¸‰ã¤é¦–ã®ç£', kana:'å¸¸å¤œã‚°ãƒ©ãƒ‡ã‚£ã‚¦ã‚¹', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] é£Ÿã‚‰ã„ã¤ãé¡', kana:'å¸¸å¤œã‚¨ãƒ‡ãƒ¬', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] çŸ¥æ€§ã®èŸ²', kana:'å¸¸å¤œã‚°ãƒã‚¹ã‚¿ãƒ¼', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] å…†ã—', kana:'å¸¸å¤œãƒãƒªã‚¹', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] èª¿å¾‹ã®é­”ç‰©', kana:'å¸¸å¤œãƒªãƒ–ãƒ©', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] é—‡é§†ã‘ã‚‹ç‹©äºº', kana:'å¸¸å¤œãƒ•ãƒ«ã‚´ãƒ¼ãƒ«', deep:true, dlc:false},
    {name:'[å¸¸å¤œ] éœ§ã®è£‚ã‘ç›®', kana:'å¸¸å¤œã‚«ãƒªã‚´', deep:true, dlc:false},
    {name:'æ·±ãå¤œ', kana:null, deep:true, dlc:false},
  ];

  // UI refs
  const charsEl = document.getElementById('chars');
  const bossesEl = document.getElementById('bosses');
  const playersEl = document.getElementById('players');
  const allowDupEl = document.getElementById('allowDup');
  const withDlcEl = document.getElementById('withDlc');
  const resultBox = document.getElementById('resultBox');

  // state
  let charState = Array(CHARACTERS.length).fill(true);
  let bossState = Array(BOSSES.length).fill((i)=> !BOSSES[i].deep);
  bossState = bossState.map((v,i)=> !BOSSES[i].deep);
  let playerIndexes = [null, null, null];
  let bossIndex = null;

  function showToast(msg){
    const t = document.createElement('div');
    t.className = 'toast';
    t.textContent = msg;
    document.body.appendChild(t);
    // å¼·åˆ¶ reflow ã§ã‚¢ãƒ‹ãƒ¡é–‹å§‹
    requestAnimationFrame(()=> t.classList.add('show'));
    setTimeout(()=>{
      t.classList.remove('show');
      setTimeout(()=> t.remove(), 300);
    }, 2200);
  }

  // render lists
  function renderChars(){
    charsEl.innerHTML = '';
    CHARACTERS.forEach((c,i)=>{
      const btn = document.createElement('label');
      btn.className = 'chip';
      btn.innerHTML = `
        <input
          type="checkbox"
          value="${c.name}"
          data-dlc="${c.dlc}"
          data-i="${i}"
          ${charState[i]? 'checked':''}
        />
        ${c.name}
      `;
      btn.querySelector('input').addEventListener('change', e => { charState[i]=e.target.checked; });
      charsEl.appendChild(btn);
    });
  }
  function renderBosses(){
    bossesEl.innerHTML = '';
    BOSSES.forEach((b,i)=>{
      const isDeep = b.deep;
      const outer = document.createElement('label');
      outer.className = 'chip';
      const disabled = isDeep ? '' : '';
      const checked = bossState[i] ? 'checked' : '';
      outer.innerHTML = `
        <input
          type="checkbox"
          value="${b.name}"
          data-i="${i}"
          data-dlc="${b.dlc}"
          ${checked}
        />
        ${b.name}${b.kana ? ' (' + b.kana + ')' : ''}
      `;
      const cb = outer.querySelector('input');
      cb.addEventListener('change', e=>{ bossState[i]=e.target.checked; });
      if(isDeep){
        // control via night list
        cb.checked = bossState[i];
      }
      bossesEl.appendChild(outer);
    });
  }

  // toggle dlc elements
  function toggleDlcElements() {
    const withDlc = withDlcEl.checked;
    const dlcCharacters = document.querySelectorAll('#chars input[type="checkbox"][data-dlc="true"]');
    const dlcBosses = document.querySelectorAll('#bosses input[type="checkbox"][data-dlc="true"]');
    if (withDlc) {
      dlcCharacters.forEach(i => {
        i.checked = true;
        i.removeAttribute('disabled');
        i.dispatchEvent(new Event('change'));
      });
      dlcBosses.forEach(i => {
        i.checked = true;
        i.removeAttribute('disabled');
        i.dispatchEvent(new Event('change'));
      })
    } else {
      dlcCharacters.forEach(i => {
        i.checked = false;
        i.setAttribute('disabled', 'disabled');
        i.dispatchEvent(new Event('change'));
      });
      dlcBosses.forEach(i => {
        i.checked = false;
        i.setAttribute('disabled', 'disabled');
        i.dispatchEvent(new Event('change'));
      })
    }
  }
  document.getElementById('withDlc').addEventListener('change', toggleDlcElements);

  // pick random helpers
  function spinOnce(){
    // build candidate lists
    const candidatesChars = charState.map((v,i)=> v? i : null).filter(v=> v!==null);
    let candidatesBosses = bossState.map((v,i)=> v? i : null).filter(v=> v!==null);
    // if includeNight checkbox unchecked, filter night out

    if(candidatesChars.length === 0 || candidatesBosses.length === 0){
      resultBox.innerHTML = '<div class="muted">å€™è£œãŒè¶³ã‚Šã¾ã›ã‚“ã€‚ã‚­ãƒ£ãƒ©ï¼ãƒœã‚¹ã‚’1ã¤ä»¥ä¸Šé¸æŠã—ã¦ãã ã•ã„ã€‚</div>';
      return null;
    }

    const players = Math.max(1, Math.min(3, parseInt(playersEl.value)||1));
    const allowDup = allowDupEl.checked;

    // create result
    // pick boss
    bossIndex = _.sample(candidatesBosses);
    // pick characters
    playerIndexes = [];
    let pool = [...candidatesChars];
    for(let p=0;p<players;p++){
      if(pool.length===0){
        if(allowDup) pool = [...candidatesChars]; else break;
      }
      const pick = _.sample(pool);
      playerIndexes.push(pick);
      if(!allowDup){ pool = pool.filter(x=> x!==pick); }
    }

    // render
    renderResult(bossIndex, playerIndexes);
    return {boss:bossIndex, chars:playerIndexes};
  }

  function renderResult(bossIndex, playerIndexes){
    const boss = BOSSES[bossIndex];
    let html = '';
    html += `<div class="row">ãƒœã‚¹: <strong>${boss.name}</strong>${boss.kana ? ' (' + boss.kana + ')' : ''}</div>`;
    const colors = ['é’','èµ¤','ç·‘'];
    const colorClasses = ['char-blue','char-red','char-green'];
    playerIndexes.forEach((ci,idx)=>{
      const col = colors[idx] || ('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼'+(idx+1));
      html += `
        <div class="row ${colorClasses[idx] || ''}">
          <span style="display:inline-block"></span>
          <strong>${col}:</strong> ${CHARACTERS[ci].name}
        </div>
      `;
    });
    resultBox.innerHTML = html;
  }

  function copyResultText(){
    if(bossIndex === null || !playerIndexes.length){ alert('ã¾ã çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã—ã¦ãã ã•ã„ã€‚'); return; }
    const boss = BOSSES[bossIndex];
    const chars = playerIndexes.map(x=> CHARACTERS[parseInt(x)]);
    const colors = ['é’','èµ¤','ç·‘'];
    let txt = `ãƒœã‚¹: ${boss.name}${boss.kana ? ' (' + boss.kana + ')' : ''}\n`;
    chars.forEach((c,i)=> txt += `${colors[i]}: ${c.name}\n`);
    navigator.clipboard.writeText(txt).then(()=>{ showToast('çµæœã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ'); })
    .catch(()=>{ showToast('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ'); });
  }

  function renderAll(){ renderChars(); renderBosses(); }

  // event bindings
  document.getElementById('spin').addEventListener('click', ()=> spinOnce());
  document.getElementById('copy').addEventListener('click', ()=> copyResultText());
  document.getElementById('reset').addEventListener('click', ()=>{
    charState = Array(CHARACTERS.length).fill(true);
    bossState = bossState.map((_,i)=> !BOSSES[i].deep);
    allowDupEl.checked = true;
    playersEl.value = 3;
    renderAll();
    spinOnce();
  });

  // initial render
  renderAll();
  spinOnce();
})();
</script>
</body>
</html>
